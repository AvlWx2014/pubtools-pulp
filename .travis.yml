sudo: false
language: python
install: pip install tox
matrix:
  include:
  - python: "2.7"
    env: TOX_ENV=py27
  - python: "3.6"
    env: TOX_ENV=static
  - python: "3.6"
    env: TOX_ENV=cov-travis DEPLOY=1
  - python: "3.6"
    env: TOX_ENV=docs
script: tox -e $TOX_ENV
after_success:
- test $TOX_ENV = docs && scripts/push-docs

deploy:
  # Adding a new tag automatically releases to PyPI.
  provider: pypi
  user: content-delivery-release-bot
  password:
    secure: kFej0raJl2VeZqeEVQ/opXg3ztEVcaNePuuQKBNM7AUA4/TIJRFJiMfpJ7Z/WJAZzzyGOy4YnrLZeum8w0X38UR4eV11pwdNFf1FGMNQRDKyhow3MOhHtA2Oz8ecEUEldUajNf1QkOxiS9ABnbUymIs3SgB7DPtdvQMq7ENr+gyiS4CSHonf96Y3JDbtTCU3LMSvgKKjTyS1Awc8c6LN5vJ36AVfe4Y8GbBKHkwJho4ekPF6nGSAyJg2zh9vMqsUAgz+yIMmHDAAfZJimRPEB+ZdShNtqs8GXnD6KpSJXD+4b6N1YUIg24ltp3d4L7J9h5WyfIA7dfG/QmakiNToR8rgJu1hH6vewye/qKScsZu+T6VN8tY4YrBrERID9juHTIG67tdTP0N7ygwqtV7wohpXNpGanAiNVeVYP/WO5KJYcOlZBdhbXhZuRRbgT0PhQ3cQa8Fj34htllvYSKoq35NIEJIqK8ZgCGPKrNwm2oGkw2ZHQ93+KYXMvWOK3r4Rlsj6b1mAoV/8yyFPoljzr9JDiNd9CsNkQslSXUW958Mszet+rbsovitB2R1Bo8lymwzWGogKJZb366mH2/kjE/uwH2rvQNnEEnldv+L2QVPw5kejBenOa/VgxWBM5/tiIjhkmveAj0N8sNxSuB5x9Z0va3n9it3z/Fp1tth5EdY=
  on:
    tags: true
    # Only one of the environments in the matrix should have
    # deployments enabled. It's mostly arbitrary which one,
    # but best to select some Python 3.x so up-to-date tools
    # are used during release.
    condition: $DEPLOY = 1
  skip_existing: true
